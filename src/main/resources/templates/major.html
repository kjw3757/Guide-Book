<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Major</title>
</head>
<body>
<h1>희망 학과 선택</h1>
<form action="major.php" method="GET">
  <input type="text" name="query" placeholder="검색어 입력">
  <input type="submit" value="검색">
</form>

<h2>검색 결과</h2>
<ul id="searchResults">
  <!-- 검색 결과가 여기에 동적으로 추가됩니다. -->
</ul>

<script>
  // 검색 결과를 동적으로 추가하는 JavaScript 코드
  // 검색 결과를 동적으로 추가하는 JavaScript 코드
  function showResults(results) {
    var resultsList = document.getElementById('searchResults');
    resultsList.innerHTML = ''; // 이전 결과 삭제

    if (results.length === 0) {
      var noResultsItem = document.createElement('li');
      noResultsItem.textContent = '검색 결과 없음';
      resultsList.appendChild(noResultsItem);
    } else {
      for (var i = 0; i < results.length; i++) {
        var resultItem = document.createElement('li');
        resultItem.textContent = results[i];
        resultsList.appendChild(resultItem);
      }
    }
  }

  // 폼 제출 이벤트 처리
  document.querySelector('form').addEventListener('submit', function (e) {
    e.preventDefault(); // 기본 제출 동작 방지

    var query = document.querySelector('input[name="query"]').value;
    if (query.trim() === "") {
      return;
    }

    // AJAX 요청 보내기
    var xhr = new XMLHttpRequest();
    xhr.open("GET", "search.php?query=" + query, true);
    xhr.onreadystatechange = function () {
      if (xhr.readyState == 4 && xhr.status == 200) {
        var results = JSON.parse(xhr.responseText);
        showResults(results);
      }
    };
    xhr.send();
  });

  // AJAX 요청을 보내고 검색 결과를 컨트롤러로 전송
  function sendSearchResultsToController(results) {
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "/member/major", true);
    xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    xhr.onreadystatechange = function () {
      if (xhr.readyState == 4 && xhr.status == 200) {
        // 컨트롤러에서의 응답을 처리할 수 있습니다.
        var response = JSON.parse(xhr.responseText);
        console.log(response.message); // 컨트롤러에서의 응답 메시지
      }
    };

    var data = JSON.stringify({ results: results });
    xhr.send(data);
  }


</script>
</body>
</html>
